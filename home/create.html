<?php
session_start();
if(!isset($_SESSION['username'])){
    header("Location: ../index.html");
}
?>

<!DOCTYPE html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="../css/home.css">
    <meta name="description" content="Mehdi Dridi. I'm a software engineer obsessed with code quality, software architecture, and building experiences.">
    <script src="../js/home.js"></script>


    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- maps loccation choose -->
    <script type="text/javascript" src='http://maps.google.com/maps/api/js?libraries=places&key=AIzaSyBCVuS83u7FTWYsPCpKN8QoVJeIiSmmo1Y'></script>
    <script src="../js/locationpicker.jquery.js"></script>

    <title>create encounter</title>
</head>
<body>

<div class="topnav">
    <div class="boo">
        <!-- class="active" when selected -->
        <a href="home.php">Home</a>
        <a href="#news">News</a>
        <a href="#contact">Contact</a>
        <a href="#about">About</a>
    </div>
    <div class="dropdown">
        <a onclick="dropMenu()" class="dropbtn">Settings</a>
        <div id="myDropdown" class="dropdown-content">
            <a href="#home">Profile </a>
            <a href="../php/logout.php">Logout</a>
        </div>
    </div>

</div>

<div style="padding-left:16px">
    <form name="register" id='register' action='create.php' method='post' accept-charset='UTF-8' onkeypress="return event.keyCode != 13;">
        <h3>Register:</h3>

        <label><b>Title</b></label>
        <input type="text" placeholder="Title" name="title" required><br />

        <label><b>Description</b></label>
        <textarea placeholder="Description" class="text" cols="35" rows ="5" maxlength="150" name="description"></textarea><br />

        <label><b>location</b></label>
        Location: <input type="text" id="us3-address" name="location" style="width: 200px" required />
        <div id="loc" style="width: 500px; height: 400px;" ></div><br />

        <label><b>date</b></label>
        <p>Date: <input type="text" id="datepicker" name="date" required></p>
        <label>hour: </label>
        <select name="hour" id="hour">
        </select>

        <label>minutes: </label>
        <select name="min" id="min" >
        </select><br />

        <label>maximum number of people:</label>
        <select id="max" name ="max" ></select><br />

        <label>Age:</label><br />
        Between: <select id="age" name ="age" ></select>
        And :    <select id="age1" name ="age1" ></select>


        <br />
        <button type="submit">Register</button>

    </form>
</div>


<script>
    //jquery function to select the date
    $( function() {
        $( "#datepicker" ).datepicker();
    } );

    //google maps api to select location
    $('#loc').locationpicker({
        location: {
            latitude: 46.15242437752303,
            longitude: 2.7470703125
        },
        radius: 300,
        inputBinding: {
            locationNameInput: $('#us3-address')
        },
        enableAutocomplete: true,
        onchanged: function (currentLocation, radius, isMarkerDropped) {
            //alert("Location changed. New location (" + currentLocation.latitude + ", " + currentLocation.longitude + ")");
           // $("#location").val(currentLocation.latitude + ", " + currentLocation.longitude);
        }
    });

    //set the hours and minutes and maximum people in the dropdown
    var hour = "";
    var mins = "";
    var max = "";
    var age = "";
    var age1 = "";
    var i = 0;
    var s = '';
    for(var i = 0; i < 24; i++)
    {
        if(i <= 9){
            s= '0'+i;
            hour += "<option value="+s+">"+s+"</option>";
        } else {
            hour += "<option value="+i+">"+i+"</option>";
        }

    }
    i = 0;
    for(var i = 0; i < 60; i++)
    {
        if(i <= 9){
            s= '0'+i;
            mins += "<option value="+s+">"+s+"</option>";
        } else {
            mins += "<option value="+i+">"+i+"</option>";
        }
    }
    i = 0;
    for(var i = 2; i <= 20; i++)
    {
        max += "<option value="+i+">"+i+"</option>";
    }

    i = 0;
    for(var i = 0; i <= 70; i++)
    {
        if(i == 18)
            age += "<option value="+i+" selected>"+i+"</option>";
        age += "<option value="+i+">"+i+"</option>";
    }

    i = 0;
    for(var i = 0; i <= 70; i++)
    {
        if(i == 25)
            age1 += "<option value="+i+" selected>"+i+"</option>";
        age1 += "<option value="+i+">"+i+"</option>";
    }



    $("#hour").html(hour);
    $("#min").html(mins);
    $("#max").html(max);
    $("#age").html(age);
    $("#age1").html(age1);
</script>

</body>
</html>

